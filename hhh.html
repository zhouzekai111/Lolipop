<!DOCTYPE html>
<html>
<head>
    <title>五言绝句生成器</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .poem-card {
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .chinese-font {
            font-family: 'SimSun', serif;
        }
        .loading-dots:after {
            content: '...';
            animation: dots 1s steps(5, end) infinite;
        }
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60% { content: '...'; }
            80%, 100% { content: ''; }
        }
    </style>
</head>
<body class="bg-light">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="poem-card p-4 mb-4">
                    <h3 class="text-center mb-4">五言绝句生成器</h3>
                    <div class="input-group mb-3">
                        <input type="text" id="keywords" 
                               class="form-control" 
                               placeholder="输入2-5个关键词（例如：明月 清风）">
                        <button class="btn btn-primary" onclick="generatePoem()">生成</button>
                    </div>
                    <div id="poem-output" class="text-center chinese-font fs-5"></div>
                </div>
            </div>
        </div>
    </div>

<script>
// 基础词库与模板
const DICT = {
    明月: ['皎皎空中月', '明月照高楼', '清辉万里同', '玉轮悬夜空'],
    清风: ['清风拂面来', '微风吹罗幕', '轻风入怀抱', '和风送春归'],
    山河: ['山河表里潼', '千山鸟飞绝', '国破山河在', '山河万里情']
};

const TEMPLATES = [
    { pattern: 'A，B。C，D。' },
    { pattern: 'A，B。C，D。' },
    { pattern: 'A，B。C，D。' }
];

function generatePoem() {
    const keywords = document.getElementById('keywords').value.trim().split(' ');
    const output = document.getElementById('poem-output');
    
    if (keywords.length < 2 || keywords.length > 5) {
        output.innerHTML = '<div class="text-danger">请输入2-5个关键词</div>';
        return;
    }

    output.innerHTML = '<div class="text-muted">创作中<span class="loading-dots"></span></div>';
    
    // 生成延迟效果
    setTimeout(() => {
        try {
            const poemLines = [];
            const selectedWords = [];
            
            // 为每个关键词选择诗句
            keywords.forEach(word => {
                if (DICT[word]) {
                    selectedWords.push(...DICT[word]);
                }
            });

            // 补足四句
            while(selectedWords.length <4){
                selectedWords.push('天意从来高难问');
            }

            // 组合诗句
            const template = TEMPLATES[Math.floor(Math.random()*TEMPLATES.length)];
            const poem = template.pattern
                .replace('A', selectedWords[0])
                .replace('B', selectedWords[1])
                .replace('C', selectedWords[2])
                .replace('D', selectedWords[3]);

            output.innerHTML = poem.split('。').join('<br>');
        } catch (error) {
            output.innerHTML = '<div class="text-danger">生成失败，请重试</div>';
        }
    }, 800);
}
</script>
</body>
</html>
